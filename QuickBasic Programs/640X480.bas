'PRINTER PORT VIDEO ADAPTER 640 X 40 RES

CLS: SCREEN 12 '12 = 640 X 480 X 16
FOR I& = 0 TO 15 'SET UP B&W PALETTE
PALETTE I&, (65536 * I& + 256 * I& + I&) * 4: NEXT I&
COLOR 10
LINE (1, 1)-(256, 247), , B
LINE (3, 3)-(254, 245), , B
LINE (300, 1)-(556, 247), , B
LINE (303, 3)-(554, 245), , B
LOCATE 16, 10: PRINT "LIVE VIDEO"
LOCATE 16, 48: PRINT "STORED PICTURE"
LOCATE 17, 1: PRINT "** PRINTER PORT VIDEO ADAPTER **"
LOCATE 17, 40: PRINT "OPTIONS; Q=QUIT, S=SAVE, V=VIEW"
LOCATE 18, 1: PRINT "AVAILABLE FILES;"
LOCATE 19, 1: FILES "*.MPX"
START: OUT &H37A, 2 'WRITE PICTURE DATA TO RAM
FOR A = 1 TO 5000: NEXT A 'DELAY FOR V SYNC
OUT &H37A, 4 'READ DATA, RESET
FOR V = -16 TO 240 'VERTICAL RANGE
    PSET (0, V), 0
    FOR H = 0 TO 255 'HORIZONTAL RANGE
        OUT &H37A, 0: OUT &H37A, 1: PSET STEP(1, 0), INP(&H379) / 16
    NEXT H
NEXT V
key$ = INKEY$ 'GET USERS RESPONSE
IF key$ = "Q" OR key$ = "q" THEN END
DIM PICTURE%(0 TO 29000) ' WON'T COMPILE IF GREATER THAN 29K
IF key$ = "S" OR key$ = "s" THEN
    LOCATE 18, 40: INPUT "SAVE FILE NAME? ", file$
    LOCATE 18, 40: PRINT "                                            "
    file$ = file$ + ".MPX"
    GET (0, 0)-(255, 240), PICTURE%()
    DEF SEG = VARSEG(PICTURE%(1))
    BSAVE file$, VARPTR(PICTURE%(1)), 32000
    DEF SEG
END IF
IF key$ = "V" OR key$ = "v" THEN
    LOCATE 18, 40: INPUT "VIEW FILE NAME? ", file$
    LOCATE 18, 40: PRINT "                                            "
    file$ = file$ + ".MPX"
    GET (0, 0)-(255, 240), PICTURE%()
    DEF SEG = VARSEG(PICTURE%(1))
    BLOAD file$, VARPTR(PICTURE%(1))
    DEF SEG
    PUT (300, 0), PICTURE%(), PSET
END IF
LOCATE 18, 1: PRINT "AVAILABLE FILES;"
LOCATE 19, 1: FILES "*.MPX"
GOTO START 'RESTART FOR CONTINUOUS UPDATING


